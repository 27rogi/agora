!function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}var d,p,h,_,g,v,y={text:"Agora",style:"background: #526d78; border-rounded: 6px; padding: 4px; text-weight: semibold;"},m=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Info";return console.info("%c".concat(y.text,"(").concat(e,")"),y.style,t)},b=new Event("ConfigApplyEvent"),w={init:function(){var t={dark:!1,loader:!0,redesign:!0,theme:"default",hideSignatures:!0,hideStats:!1,sidebar:!0,recolor:null,colors:{primary:null}};if(window.localStorage.getItem("rumctheme")){var n=JSON.parse(window.localStorage.getItem("rumctheme"));if(n===t)return;m("Found modified config, merging with default...","Config"),window.localStorage.setItem("rumctheme",JSON.stringify(e(e({},t),n)))}else m("No config found, created new record in localStorage.","Config"),window.localStorage.setItem("rumctheme",JSON.stringify(t));return this},get store(){return JSON.parse(window.localStorage.getItem("rumctheme"))},doChangelogMatch:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.store.changelogV===t},set:function(t){return window.localStorage.setItem("rumctheme",JSON.stringify(t)),m("New values should be applied.","Config"),void this.apply()},apply:function(){m("Applying changes to config","Config"),document.body.setAttribute("class",""),document.documentElement.setAttribute("class",""),this.store.redesign?(document.body.classList.add("ruminetheme_1"),!document.head.querySelector('link[href="'.concat("https://raw.githack.com/rogi27/agora/main",'/dist/theme.css"]'))&&document.head.insertAdjacentHTML("beforeend",'<link href="'.concat("https://raw.githack.com/rogi27/agora/main",'/dist/theme.css" type="text/css" rel="stylesheet">'))):document.head.querySelector('link[href="'.concat("https://raw.githack.com/rogi27/agora/main",'/dist/theme.css"]'))&&document.head.querySelector('link[href="'.concat("https://raw.githack.com/rogi27/agora/main",'/dist/theme.css"]')).remove(),this.store.dark&&document.documentElement.classList.add("dark"),this.store.theme&&"orange"===this.store.theme&&document.body.classList.add("orange"),this.store.hideSignatures&&document.body.classList.add("hideSignatures"),this.store.hideStats&&document.body.classList.add("hideStats"),this.store.sidebar&&document.body.classList.add("enableSidebar"),document.dispatchEvent(b)}},k={},S=[],x=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function P(t,e){for(var n in e)t[n]=e[n];return t}function O(t){var e=t.parentNode;e&&e.removeChild(t)}function C(t,e,n){var r,o,i,a={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(2<arguments.length&&(a.children=3<arguments.length?d.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return j(t,a,r,o,null)}function j(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++h:o};return null==o&&null!=p.vnode&&p.vnode(i),i}function E(t){return t.children}function N(t,e){this.props=t,this.context=e}function A(t,e){if(null==e)return t.__?A(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?A(t):null}function M(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return M(t)}}function I(t){(!t.__d&&(t.__d=!0)&&_.push(t)&&!L.__r++||v!==p.debounceRendering)&&((v=p.debounceRendering)||g)(L)}function L(){for(var t;L.__r=_.length;)t=_.sort((function(t,e){return t.__v.__b-e.__v.__b})),_=[],t.some((function(t){var e,n,r,o,i,a;t.__d&&(i=(o=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=P({},o)).__v=o.__v+1,U(a,o,r,e.__n,void 0!==a.ownerSVGElement,null==o.__h?null:[i],n,null==i?A(o):i,o.__h),B(n,o),o.__e!=i&&M(o)))}))}function D(t,e,n,r,o,i,a,l,s,u){var c,f,d,p,h,_,g,v=r&&r.__k||S,y=v.length;for(n.__k=[],c=0;c<e.length;c++)if(null!=(p=n.__k[c]=null==(p=e[c])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?j(null,p,null,null,p):Array.isArray(p)?j(E,{children:p},null,null,null):0<p.__b?j(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(d=v[c])||d&&p.key==d.key&&p.type===d.type)v[c]=void 0;else for(f=0;f<y;f++){if((d=v[f])&&p.key==d.key&&p.type===d.type){v[f]=void 0;break}d=null}U(t,p,d=d||k,o,i,a,l,s,u),h=p.__e,(f=p.ref)&&d.ref!=f&&(g||(g=[]),d.ref&&g.push(d.ref,null,p),g.push(f,p.__c||h,p)),null==h?s&&d.__e==s&&s.parentNode!=t&&(s=A(d)):(null==_&&(_=h),"function"==typeof p.type&&p.__k===d.__k?p.__d=s=T(p,s,t):s=F(t,p,d,v,h,s),"function"==typeof n.type&&(n.__d=s))}for(n.__e=_,c=y;c--;)null!=v[c]&&("function"==typeof n.type&&null!=v[c].__e&&v[c].__e==n.__d&&(n.__d=A(r,c+1)),J(v[c],v[c]));if(g)for(c=0;c<g.length;c++)W(g[c],g[++c],g[++c])}function T(t,e,n){for(var r,o=t.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=t,e="function"==typeof r.type?T(r,e,n):F(n,r,r,o,r.__e,e));return e}function F(t,e,n,r,o,i){var a,l,s;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),a=null;else{for(l=i,s=0;(l=l.nextSibling)&&s<r.length;s+=2)if(l==o)break t;t.insertBefore(o,i),a=i}return void 0===a?o.nextSibling:a}function H(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||x.test(e)?n:n+"px"}function q(t,e,n,r,o){var i;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||H(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||H(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r||t.addEventListener(e,i?V:R,i):t.removeEventListener(e,i?V:R,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function R(t){this.l[t.type+!1](p.event?p.event(t):t)}function V(t){this.l[t.type+!0](p.event?p.event(t):t)}function U(t,e,n,r,o,i,a,l,s){var u,c,f,d,h,_,g,v,y,m,b,w=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(s=n.__h,l=e.__e=n.__e,e.__h=null,i=[l]),(u=p.__b)&&u(e);try{t:if("function"==typeof w){if(v=e.props,y=(u=w.contextType)&&r[u.__c],m=u?y?y.props.value:u.__:r,n.__c?g=(c=e.__c=n.__c).__=c.__E:("prototype"in w&&w.prototype.render?e.__c=c=new w(v,m):(e.__c=c=new N(v,m),c.constructor=w,c.render=z),y&&y.sub(c),c.props=v,c.state||(c.state={}),c.context=m,c.__n=r,f=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=w.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=P({},c.__s)),P(c.__s,w.getDerivedStateFromProps(v,c.__s))),d=c.props,h=c.state,f)null==w.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==w.getDerivedStateFromProps&&v!==d&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(v,m),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(v,c.__s,m)||e.__v===n.__v){c.props=v,c.state=c.__s,e.__v!==n.__v&&(c.__d=!1),c.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),c.__h.length&&a.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(v,c.__s,m),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(d,h,_)}))}c.context=m,c.props=v,c.state=c.__s,(u=p.__r)&&u(e),c.__d=!1,c.__v=e,c.__P=t,u=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(r=P(P({},r),c.getChildContext())),f||null==c.getSnapshotBeforeUpdate||(_=c.getSnapshotBeforeUpdate(d,h)),b=null!=u&&u.type===E&&null==u.key?u.props.children:u,D(t,Array.isArray(b)?b:[b],e,n,r,o,i,a,l,s),c.base=e.__e,e.__h=null,c.__h.length&&a.push(c),g&&(c.__E=c.__=null),c.__e=!1}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$(n.__e,e,n,r,o,i,a,s);(u=p.diffed)&&u(e)}catch(t){e.__v=null,(s||null!=i)&&(e.__e=l,e.__h=!!s,i[i.indexOf(l)]=null),p.__e(t,e,n)}}function B(t,e){p.__c&&p.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){p.__e(t,e.__v)}}))}function $(t,e,n,r,o,i,a,l){var s,u,c,f=n.props,p=e.props,h=e.type,_=0;if("svg"===h&&(o=!0),null!=i)for(;_<i.length;_++)if((s=i[_])&&"setAttribute"in s==!!h&&(h?s.localName===h:3===s.nodeType)){t=s,i[_]=null;break}if(null==t){if(null===h)return document.createTextNode(p);t=o?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,p.is&&p),i=null,l=!1}if(null===h)f===p||l&&t.data===p||(t.data=p);else{if(i=i&&d.call(t.childNodes),u=(f=n.props||k).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!l){if(null!=i)for(f={},_=0;_<t.attributes.length;_++)f[t.attributes[_].name]=t.attributes[_].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(function(t,e,n,r,o){for(var i in n)"children"===i||"key"===i||i in e||q(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||q(t,i,e[i],n[i],r)}(t,p,f,o,l),c)e.__k=[];else if(_=e.props.children,D(t,Array.isArray(_)?_:[_],e,n,r,o&&"foreignObject"!==h,i,a,i?i[0]:n.__k&&A(n,0),l),null!=i)for(_=i.length;_--;)null!=i[_]&&O(i[_]);l||("value"in p&&void 0!==(_=p.value)&&(_!==f.value||_!==t.value||"progress"===h&&!_)&&q(t,"value",_,f.value,!1),"checked"in p&&void 0!==(_=p.checked)&&_!==t.checked&&q(t,"checked",_,f.checked,!1))}return t}function W(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){p.__e(t,n)}}function J(t,e,n){var r,o;if(p.unmount&&p.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||W(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){p.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&J(r[o],e,"function"!=typeof t.type);n||null==t.__e||O(t.__e),t.__e=t.__d=void 0}function z(t,e,n){return this.constructor(t,n)}function X(t,e,n){var r,o,i;p.__&&p.__(t,e),o=(r="function"==typeof n)?null:n&&n.__k||e.__k,i=[],U(e,t=(!r&&n||e).__k=C(E,null,[t]),o||k,k,void 0!==e.ownerSVGElement,!r&&n?[n]:o?null:e.firstChild?d.call(e.childNodes):null,i,!r&&n?n:o?o.__e:e.firstChild,r),B(i,t)}d=S.slice,p={__e:function(t,e){for(var n,r,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(t)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),o=n.__d),o)return n.__E=n}catch(e){t=e}throw t}},h=0,N.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=P({},this.state),"function"==typeof t&&(t=t(P({},n),this.props)),t&&P(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),I(this))},N.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),I(this))},N.prototype.render=E,_=[],g="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,L.__r=0;var G=function(t,e,n,r){var o;e[0]=0;for(var i=1;i<e.length;i++){var a=e[i++],l=e[i]?(e[0]|=a?1:2,n[e[i++]]):e[++i];3===a?r[0]=l:4===a?r[1]=Object.assign(r[1]||{},l):5===a?(r[1]=r[1]||{})[e[++i]]=l:6===a?r[1][e[++i]]+=l+"":a?(o=t.apply(l,G(t,l,n,["",null])),r.push(o),l[0]?e[0]|=2:(e[i-2]=0,e[i]=o)):r.push(l)}return r},K=new Map;(function(t){var e=K.get(this);return e||(e=new Map,K.set(this,e)),1<(e=G(this,e.get(t)||(e.set(t,e=function(t){for(var e,n,r=1,o="",i="",a=[0],l=function(t){1===r&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,t,o):3===r&&(t||o)?(a.push(3,t,o),r=2):2===r&&"..."===o&&t?a.push(4,t,0):2===r&&o&&!t?a.push(5,0,!0,o):5<=r&&((o||!t&&5===r)&&(a.push(r,0,o,n),r=6),t&&(a.push(r,t,0,n),r=6)),o=""},s=0;s<t.length;s++){s&&(1===r&&l(),l(s));for(var u=0;u<t[s].length;u++)e=t[s][u],1===r?"<"===e?(l(),a=[a],r=3):o+=e:4===r?"--"===o&&">"===e?(r=1,o=""):o=e+o[0]:i?e===i?i="":o+=e:'"'===e||"'"===e?i=e:">"===e?(l(),r=1):r&&("="===e?(r=5,n=o,o=""):"/"===e&&(5>r||">"===t[s][u+1])?(l(),3===r&&(a=a[0]),r=a,(a=a[0]).push(2,0,r),r=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(l(),r=2):o+=e),3===r&&"!--"===o&&(r=4,a=a[0])}return l(),a}(t)),e),arguments,[])).length?e:e[0]}).bind(C);var Q=function(t){var e=n(t);return null!==t&&("object"===e||"function"===e)},Y=new Set(["__proto__","prototype","constructor"]);function Z(t){for(var e,n=t.split("."),r=[],o=0;o<n.length;o++){for(e=n[o];"\\"===e[e.length-1]&&void 0!==n[o+1];)e=e.slice(0,-1)+".",e+=n[++o];r.push(e)}return function(t){return!t.some((function(t){return Y.has(t)}))}(r)?r:[]}var tt=function(t,e,n){if(!Q(t)||"string"!=typeof e)return void 0===n?t:n;var r=Z(e);if(0!==r.length){for(var o=0;o<r.length;o++)if(null==(t=t[r[o]])){if(o!==r.length-1)return n;break}return void 0===t?n:t}},et=function(t,e,n){if(!Q(t)||"string"!=typeof e)return t;for(var r,o=t,i=Z(e),a=0;a<i.length;a++)r=i[a],Q(t[r])||(t[r]={}),a==i.length-1&&(t[r]=n),t=t[r];return o};function nt(){var t={change:{text:"🪄 изменено",class:"change"},new:{text:"✨ новое",class:"new"},fix:{text:"🏗️ исправлено",class:"fix"},breaking:{text:"⚠️ ВАЖНОЕ",class:"breaking"}},e=[{type:t.new,text:"Режим для перекрашивания тем в ваши любимые цвета (кривой)."},{type:t.change,text:"Новая тема теперь использует переменные из CSS, благодаря этому перекрашивание элементов стало лучше и размер файла стилей уменшился на 20%."},{type:t.change,text:"Переделана система сохранения настроек скрипта."}];return C("div",{className:"changelog"},C("p",{className:"changelog__title"},"Список изменений от 04.01.2022"),C("ul",null,e.map((function(t,e){return C("li",{key:e},C("p",{className:"badge badge_".concat(t.type.class)},t.type.text),C("p",null,t.text))}))))}var rt={grad:.9,turn:360,rad:360/(2*Math.PI)},ot=function(t){return"string"==typeof t?0<t.length:"number"==typeof t},it=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},at=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t>e?t:e},lt=function(t){return 0<(t=isFinite(t)?t%360:0)?t:t+360},st=function(t){return{r:at(t.r,0,255),g:at(t.g,0,255),b:at(t.b,0,255),a:at(t.a)}},ut=function(t){return{r:it(t.r),g:it(t.g),b:it(t.b),a:it(t.a,3)}},ct=/^#([0-9a-f]{3,8})$/i,ft=function(t){var e=t.toString(16);return 2>e.length?"0"+e:e},dt=function(t){var e=t.r,n=t.g,r=t.b,o=t.a,i=Math.max(e,n,r),a=i-Math.min(e,n,r),l=a?i===e?(n-r)/a:i===n?2+(r-e)/a:4+(e-n)/a:0;return{h:60*(0>l?l+6:l),s:i?a/i*100:0,v:i/255*100,a:o}},pt=function(t){var e=t.h,n=t.s,r=t.v,o=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),a=r*(1-n),l=r*(1-(e-i)*n),s=r*(1-(1-e+i)*n),u=i%6;return{r:255*[r,l,a,a,s,r][u],g:255*[s,r,r,l,a,a][u],b:255*[a,a,s,r,r,l][u],a:o}},ht=function(t){return{h:lt(t.h),s:at(t.s,0,100),l:at(t.l,0,100),a:at(t.a)}},_t=function(t){return{h:it(t.h),s:it(t.s),l:it(t.l),a:it(t.a,3)}},gt=function(t){return pt((n=(e=t).s,{h:e.h,s:0<(n*=(50>(r=e.l)?r:100-r)/100)?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},vt=function(t){return{h:(e=dt(t)).h,s:0<(o=(200-(n=e.s))*(r=e.v)/100)&&200>o?n*r/100/(100>=o?o:200-o)*100:0,l:o/2,a:e.a};var e,n,r,o},yt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kt={string:[[function(t){var e=ct.exec(t);return e?4>=(t=e[1]).length?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?it(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?it(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=bt.exec(t)||wt.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:st({r:+e[1]/(e[2]?100/255:1),g:+e[3]/(e[4]?100/255:1),b:+e[5]/(e[6]?100/255:1),a:void 0===e[7]?1:+e[7]/(e[8]?100:1)}):null},"rgb"],[function(t){var e=yt.exec(t)||mt.exec(t);if(!e)return null;var n,r,o=ht({h:(n=e[1],r=e[2],void 0===r&&(r="deg"),+n*(rt[r]||1)),s:+e[3],l:+e[4],a:void 0===e[5]?1:+e[5]/(e[6]?100:1)});return gt(o)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,o=t.a,i=void 0===o?1:o;return ot(e)&&ot(n)&&ot(r)?st({r:+e,g:+n,b:+r,a:+i}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,o=t.a,i=void 0===o?1:o;if(!ot(e)||!ot(n)||!ot(r))return null;var a=ht({h:+e,s:+n,l:+r,a:+i});return gt(a)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,o=t.a,i=void 0===o?1:o;if(!ot(e)||!ot(n)||!ot(r))return null;var a=function(t){return{h:lt(t.h),s:at(t.s,0,100),v:at(t.v,0,100),a:at(t.a)}}({h:+e,s:+n,v:+r,a:+i});return pt(a)},"hsv"]]},St=function(t,e){for(var n,r=0;r<e.length;r++)if(n=e[r][0](t))return[n,e[r][1]];return[null,void 0]},xt=function(t,e){var n=vt(t);return{h:n.h,s:at(n.s+100*e,0,100),l:n.l,a:n.a}},Pt=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Ot=function(t,e){var n=vt(t);return{h:n.h,s:n.s,l:at(n.l+100*e,0,100),a:n.a}},Ct=function(){function t(t){this.parsed=function(t){return"string"==typeof t?St(t.trim(),kt.string):"object"==n(t)&&null!==t?St(t,kt.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return it(Pt(this.rgba),2)},t.prototype.isDark=function(){return.5>Pt(this.rgba)},t.prototype.isLight=function(){return.5<=Pt(this.rgba)},t.prototype.toHex=function(){return e=(t=ut(this.rgba)).r,n=t.g,r=t.b,i=1>(o=t.a)?ft(it(255*o)):"","#"+ft(e)+ft(n)+ft(r)+i;var t,e,n,r,o,i},t.prototype.toRgb=function(){return ut(this.rgba)},t.prototype.toRgbString=function(){return e=(t=ut(this.rgba)).r,n=t.g,r=t.b,1>(o=t.a)?"rgba("+e+", "+n+", "+r+", "+o+")":"rgb("+e+", "+n+", "+r+")";var t,e,n,r,o},t.prototype.toHsl=function(){return _t(vt(this.rgba))},t.prototype.toHslString=function(){return e=(t=_t(vt(this.rgba))).h,n=t.s,r=t.l,1>(o=t.a)?"hsla("+e+", "+n+"%, "+r+"%, "+o+")":"hsl("+e+", "+n+"%, "+r+"%)";var t,e,n,r,o},t.prototype.toHsv=function(){return t=dt(this.rgba),{h:it(t.h),s:it(t.s),v:it(t.v),a:it(t.a,3)};var t},t.prototype.invert=function(){return jt({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),jt(xt(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),jt(xt(this.rgba,-t))},t.prototype.grayscale=function(){return jt(xt(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),jt(Ot(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),jt(Ot(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?jt({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):it(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=vt(this.rgba);return"number"==typeof t?jt({h:t,s:e.s,l:e.l,a:e.a}):it(e.h)},t.prototype.isEqual=function(t){return this.toHex()===jt(t).toHex()},t}(),jt=function(t){return t instanceof Ct?t:new Ct(t)},Et=[],Nt=function(t){var e=t/255;return.04045>e?e/12.92:Math.pow((e+.055)/1.055,2.4)},At=function(t){return.2126*Nt(t.r)+.7152*Nt(t.g)+.0722*Nt(t.b)};!function(t){t.forEach((function(t){0>Et.indexOf(t)&&(t(Ct,kt),Et.push(t))}))}([function(t){t.prototype.luminance=function(){return t=At(this.rgba),void 0===(e=2)&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n+0;var t,e,n},t.prototype.contrast=function(e){void 0===e&&(e="#FFF");var n,r,o,i,a,l,s,u=e instanceof t?e:new t(e);return i=this.rgba,a=u.toRgb(),n=(l=At(i))>(s=At(a))?(l+.05)/(s+.05):(s+.05)/(l+.05),void 0===(r=2)&&(r=0),void 0===o&&(o=Math.pow(10,r)),Math.floor(o*n)/o+0},t.prototype.isReadable=function(t,e){return void 0===t&&(t="#FFF"),void 0===e&&(e={}),this.contrast(t)>=(a=void 0===(i=(n=e).size)?"normal":i,"AAA"===(o=void 0===(r=n.level)?"AA":r)&&"normal"===a?7:"AA"===o&&"large"===a?3:4.5);var n,r,o,i,a}}]);var Mt={colors:{original:{cave:{},stone:{}},new:{cave:{},stone:{}}},capturePallette:function(){var t=getComputedStyle(document.documentElement),e={cave:[10,20,30,40,50,100,200,300,400,500,600,700,800,900],stone:[50,100,200,300,400,500,600,700,800,900]};for(var n in e){var r,o=f(e[n]);try{for(o.s();!(r=o.n()).done;){var i=r.value;this.colors.original[n][i]=t.getPropertyValue("--colors-".concat(n,"-").concat(i))}}catch(t){o.e(t)}finally{o.f()}}return this},shiftColor:function(t,e){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],o=null,i=jt(t),a=jt(e);if(.7<(o=jt({h:a.hue(),s:100*i.luminance(),l:100*i.brightness()})).brightness()?o=r?o.darken(a.brightness()/2):o.darken(i.brightness()/2):.5<o.brightness()&&(o=o.darken(a.brightness()/4)),!n&&.4>o.brightness()&&(o=(o=o.saturate(a.luminance()/2)).darken(a.brightness()/6)),n&&!r)if(60<o.toHsl().s){console.log("isbg !isdark");var l=o.toHsl(),s=l.h;o=jt({h:s,s:2*i.brightness()*100,l:2*a.luminance()*100})}else.4>o.brightness()&&(o=o.saturate(a.luminance()/2));var u=jt(o).toRgb();return"".concat(u.r," ").concat(u.g," ").concat(u.b)},makeNewPalette:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"cave",n=2<arguments.length?arguments[2]:void 0;if(jt(t).isValid())for(var r in this.colors.original)for(var o in this.colors.original[r]){console.log(this.colors.original[r][o]);var i="rgb(".concat(this.colors.original[r][o].replaceAll(" ",","),")"),a="cave"!==e;this.colors.new.cave[o]=this.shiftColor(i,t,a,n),this.colors.new.stone[o]=this.shiftColor(i,t,a,n)}return this},applyPalette:function(){var t=document.body.style;for(var e in this.colors.new)for(var n in this.colors.new[e]){var r=this.colors.new[e][n];t.setProperty("--colors-".concat(e,"-").concat(n),r)}},clearPalette:function(){document.body.style=null}},It=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(l(t=c.call(this)),"setConfigValue",(function(e,n){var r=w.store;et(r,e,n),w.set(r),t.setState({store:r},(function(){"recolor"===e&&Mt.clearPalette(),t.state.store.recolor&&(Mt.clearPalette(),t.generatePalette(t.state.store.colors.primary))})),m("Value ".concat(t.state.store," is changed to ").concat(n,"..."),"Settings")})),o(l(t),"generatePalette",(function(){t.state.store.recolor&&jt(t.state.store.colors.primary).isValid()&&Mt.capturePallette().makeNewPalette(t.state.store.colors.primary,"default"===t.state.store.theme?"cave":"stone",t.state.store.dark).applyPalette()})),o(l(t),"setPalette",(function(e){t.setConfigValue("colors.primary",e.target.value)})),o(l(t),"resetPalette",(function(){t.setConfigValue("colors.primary",null),Mt.clearPalette()})),o(l(t),"toggleChangelog",(function(){t.setState({changelogIsOpen:!t.state.changelogIsOpen})})),t.state={store:w.store,changelogIsOpen:!1},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(e,t);var n,i,s,c=u(e);return n=e,i=[{key:"render",value:function(){var t=this,e={default:"Пещерная",orange:"Классическая"},n=function(n){return C("button",{className:t.state.store.theme===n.theme?"active":null,onClick:function(){return t.setConfigValue("theme",n.theme)}},e[n.theme])},r=function(e){var n=tt(t.state.store,e.option);return C("button",{className:n?"active":null,onClick:function(){return t.setConfigValue(e.option,!n)}},e.title)};return C("div",{className:"rumc-screen"},C("div",{className:"screen__section"},C("div",{className:"screen__title"},C("h2",null,C("b",null,"Project Agora")," ",C("span",null,"(Настройки)")),C("div",{className:"title__controls"},C("a",{href:"javascript:void(0);",onClick:this.toggleChangelog},C("i",{class:"fa fa-th-list fa-1x"})),C("a",{href:"javascript:void(0);",onClick:function(){return Tt.toggleSettingsScreen()}},C("i",{class:"fa fa-times-circle fa-1x"})))),this.state.changelogIsOpen?C("div",{className:"screen__changelog"},C(nt,null)):null,C("div",{className:"screen__options"},this.state.store.redesign?C("div",{className:"screen__option"},C("p",null,"Текущая тема"),C(n,{theme:"default"}),C(n,{theme:"orange"})):null,this.state.store.redesign?C("div",{className:"screen__option"},C("p",null,"Дополнения темы"),C(r,{title:"Темный режим (beta)",option:"dark"})):null,this.state.store.recolor?C("div",{className:"screen__option"},C("p",null,"Режим перекрашивания"),C("input",{type:"color",onInput:this.setPalette}),C("button",{onClick:Mt.clearPalette},"Очистить")):null,C("div",{className:"screen__option"},C("p",null,"Дополнения"),C(r,{title:"Показывать загрузку",option:"loader"}),C(r,{title:"Обновленная тема",option:"redesign"}),C(r,{title:"Сворачивать подписи",option:"hideSignatures"}),C(r,{title:"Скрывать статистику пользователей",option:"hideStats"}),C(r,{title:"Показывать боковое меню",option:"sidebar"}),C(r,{title:"Режим перекрашивания",option:"recolor"})))))}}],i&&r(n.prototype,i),s&&r(n,s),Object.defineProperty(n,"prototype",{writable:!1}),e}(N),Lt={duration:200,iterations:1};function Dt(){if(!document.body.querySelector("#script-config-screen")){var t=document.createElement("div");return t.id="script-config-screen",document.body.insertBefore(t,document.body.querySelector(".topmenu-wrapper")).animate([{opacity:0,transform:"translateX(300px)"},{opacity:100,transform:"translateX(0)"}],Lt),X(C(It,null),t),t}var e=document.body.querySelector("#script-config-screen");e.animate([{opacity:100,transform:"translateX(0)"},{opacity:0,transform:"translateX(300px)"}],Lt).finished.then((function(){X(null,e),e.remove()}))}var Tt={renderSettingsButton:function(){var t=document.createElement("div");return t.id="script-config",document.body.querySelector(".topmenu").insertBefore(t,document.body.querySelector(".topmenu-msg")),X(C("a",{href:"javascript:void(0);",onClick:Dt,class:"topmenu-msg"},C("i",{class:"fa fa-cog"})),t),t},toggleSettingsScreen:Dt,toggleLoader:function(){if(!document.body.querySelector("#agora-loader")){var t=document.createElement("div");t.id="agora-loader",document.body.insertBefore(t,document.body.querySelector(".topmenu-wrapper")).animate([{opacity:0},{opacity:100}],{duration:50,iterations:1});var e={wrapper:{display:"flex","z-index":999,position:"fixed",width:"100%",height:"100%",bottom:"0px",background:"linear-gradient(0deg, rgba(35,35,35,1) 0%, rgba(35,35,35,0.8) 100%)",WebkitBackdropFilter:"blur(12px)",backdropFilter:"blur(12px)"},loader:{display:"flex",margin:"auto"},heading:{"font-size":"16px",color:"white"}};return X(C("div",{id:"agora-loader",style:e.wrapper},C("div",{className:"loader",style:e.loader},C("h1",{style:e.heading},"Выполняется загрузка страницы..."))),document.body,t),t}var n=document.body.querySelector("#agora-loader");n.animate([{opacity:100},{opacity:0}],Lt).finished.then((function(){X(null,document.body,n),n.remove()}))},animationTimings:Lt};!function(){if(document.head.insertAdjacentHTML("beforeend",'<link href="'.concat("https://raw.githack.com/rogi27/agora/main",'/dist/base.css" type="text/css" rel="stylesheet">')),!window.frameElement){var t=w.init();t.store.loader&&(Tt.toggleLoader(),window.addEventListener("load",(function(){Tt.toggleLoader()}))),t.apply(),t.store.recolor&&t.store.colors.primary&&window.addEventListener("load",(function(){jt(t.store.colors.primary).isValid()&&Mt.capturePallette().makeNewPalette(t.store.colors.primary,"default"===t.store.theme?"cave":"stone",t.store.dark).applyPalette()})),t.store.hideSignatures&&window.addEventListener("DOMContentLoaded",(function(){if(document.body.querySelectorAll("#forum-topicMsgShtuff")){var t,e=f(document.body.querySelectorAll("#forum-topicMsgShtuff"));try{for(e.s();!(t=e.n()).done;){var n=t.value.querySelector(".signature");if(n)for(var r=n.nextElementSibling;r;)n.append(r),r=r.nextElementSibling}}catch(t){e.e(t)}finally{e.f()}}})),Tt.renderSettingsButton()}}()}();
